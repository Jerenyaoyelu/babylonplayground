(()=>{"use strict";var e={187:e=>{function t(e,t,i){i=i||2;var a,s,x,p,l,c,f,v=t&&t.length,y=v?t[0]*i:e.length,A=n(e,0,y,i,!0),w=[];if(!A||A.next===A.prev)return w;if(v&&(A=function(e,t,o,i){var a,s,x,p=[];for(a=0,s=t.length;a<s;a++)(x=n(e,t[a]*i,a<s-1?t[a+1]*i:e.length,i,!1))===x.next&&(x.steiner=!0),p.push(B(x));for(p.sort(u),a=0;a<p.length;a++)o=r(o=h(p[a],o),o.next);return o}(e,t,A,i)),e.length>80*i){a=x=e[0],s=p=e[1];for(var d=i;d<y;d+=i)(l=e[d])<a&&(a=l),(c=e[d+1])<s&&(s=c),l>x&&(x=l),c>p&&(p=c);f=0!==(f=Math.max(x-a,p-s))?1/f:0}return o(A,w,i,a,s,f),w}function n(e,t,n,r,o){var i,a;if(o===m(e,t,n,r)>0)for(i=t;i<n;i+=r)a=M(i,e[i],e[i+1],a);else for(i=n-r;i>=t;i-=r)a=M(i,e[i],e[i+1],a);return a&&y(a,a.next)&&(N(a),a=a.next),a}function r(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!y(r,r.next)&&0!==v(r.prev,r,r.next))r=r.next;else{if(N(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function o(e,t,n,u,h,p,B){if(e){!B&&p&&function(e,t,n,r){var o=e;do{null===o.z&&(o.z=l(o.x,o.y,t,n,r)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next}while(o!==e);o.prevZ.nextZ=null,o.prevZ=null,function(e){var t,n,r,o,i,a,s,x,u=1;do{for(n=e,e=null,i=null,a=0;n;){for(a++,r=n,s=0,t=0;t<u&&(s++,r=r.nextZ);t++);for(x=u;s>0||x>0&&r;)0!==s&&(0===x||!r||n.z<=r.z)?(o=n,n=n.nextZ,s--):(o=r,r=r.nextZ,x--),i?i.nextZ=o:e=o,o.prevZ=i,i=o;n=r}i.nextZ=null,u*=2}while(a>1)}(o)}(e,u,h,p);for(var c,f,v=e;e.prev!==e.next;)if(c=e.prev,f=e.next,p?a(e,u,h,p):i(e))t.push(c.i/n),t.push(e.i/n),t.push(f.i/n),N(e),e=f.next,v=f.next;else if((e=f)===v){B?1===B?o(e=s(r(e),t,n),t,n,u,h,p,2):2===B&&x(e,t,n,u,h,p):o(r(e),t,n,u,h,p,1);break}}}function i(e){var t=e.prev,n=e,r=e.next;if(v(t,n,r)>=0)return!1;for(var o=e.next.next;o!==e.prev;){if(c(t.x,t.y,n.x,n.y,r.x,r.y,o.x,o.y)&&v(o.prev,o,o.next)>=0)return!1;o=o.next}return!0}function a(e,t,n,r){var o=e.prev,i=e,a=e.next;if(v(o,i,a)>=0)return!1;for(var s=o.x<i.x?o.x<a.x?o.x:a.x:i.x<a.x?i.x:a.x,x=o.y<i.y?o.y<a.y?o.y:a.y:i.y<a.y?i.y:a.y,u=o.x>i.x?o.x>a.x?o.x:a.x:i.x>a.x?i.x:a.x,h=o.y>i.y?o.y>a.y?o.y:a.y:i.y>a.y?i.y:a.y,p=l(s,x,t,n,r),B=l(u,h,t,n,r),f=e.prevZ,y=e.nextZ;f&&f.z>=p&&y&&y.z<=B;){if(f!==e.prev&&f!==e.next&&c(o.x,o.y,i.x,i.y,a.x,a.y,f.x,f.y)&&v(f.prev,f,f.next)>=0)return!1;if(f=f.prevZ,y!==e.prev&&y!==e.next&&c(o.x,o.y,i.x,i.y,a.x,a.y,y.x,y.y)&&v(y.prev,y,y.next)>=0)return!1;y=y.nextZ}for(;f&&f.z>=p;){if(f!==e.prev&&f!==e.next&&c(o.x,o.y,i.x,i.y,a.x,a.y,f.x,f.y)&&v(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;y&&y.z<=B;){if(y!==e.prev&&y!==e.next&&c(o.x,o.y,i.x,i.y,a.x,a.y,y.x,y.y)&&v(y.prev,y,y.next)>=0)return!1;y=y.nextZ}return!0}function s(e,t,n){var o=e;do{var i=o.prev,a=o.next.next;!y(i,a)&&A(i,o,o.next,a)&&L(i,a)&&L(a,i)&&(t.push(i.i/n),t.push(o.i/n),t.push(a.i/n),N(o),N(o.next),o=e=a),o=o.next}while(o!==e);return r(o)}function x(e,t,n,i,a,s){var x=e;do{for(var u=x.next.next;u!==x.prev;){if(x.i!==u.i&&f(x,u)){var h=O(x,u);return x=r(x,x.next),h=r(h,h.next),o(x,t,n,i,a,s),void o(h,t,n,i,a,s)}u=u.next}x=x.next}while(x!==e)}function u(e,t){return e.x-t.x}function h(e,t){var n=function(e,t){var n,r=t,o=e.x,i=e.y,a=-1/0;do{if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){var s=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=o&&s>a){if(a=s,s===o){if(i===r.y)return r;if(i===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!n)return null;if(o===a)return n;var x,u=n,h=n.x,l=n.y,B=1/0;r=n;do{o>=r.x&&r.x>=h&&o!==r.x&&c(i<l?o:a,i,h,l,i<l?a:o,i,r.x,r.y)&&(x=Math.abs(i-r.y)/(o-r.x),L(r,e)&&(x<B||x===B&&(r.x>n.x||r.x===n.x&&p(n,r)))&&(n=r,B=x)),r=r.next}while(r!==u);return n}(e,t);if(!n)return t;var o=O(n,e),i=r(n,n.next);return r(o,o.next),t===n?i:t}function p(e,t){return v(e.prev,e,t.prev)<0&&v(t.next,e,e.next)<0}function l(e,t,n,r,o){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*o)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*o)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function B(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function c(e,t,n,r,o,i,a,s){return(o-a)*(t-s)-(e-a)*(i-s)>=0&&(e-a)*(r-s)-(n-a)*(t-s)>=0&&(n-a)*(i-s)-(o-a)*(r-s)>=0}function f(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&A(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(L(e,t)&&L(t,e)&&function(e,t){var n=e,r=!1,o=(e.x+t.x)/2,i=(e.y+t.y)/2;do{n.y>i!=n.next.y>i&&n.next.y!==n.y&&o<(n.next.x-n.x)*(i-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(v(e.prev,e,t.prev)||v(e,t.prev,t))||y(e,t)&&v(e.prev,e,e.next)>0&&v(t.prev,t,t.next)>0)}function v(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function y(e,t){return e.x===t.x&&e.y===t.y}function A(e,t,n,r){var o=d(v(e,t,n)),i=d(v(e,t,r)),a=d(v(n,r,e)),s=d(v(n,r,t));return o!==i&&a!==s||!(0!==o||!w(e,n,t))||!(0!==i||!w(e,r,t))||!(0!==a||!w(n,e,r))||!(0!==s||!w(n,t,r))}function w(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function d(e){return e>0?1:e<0?-1:0}function L(e,t){return v(e.prev,e,e.next)<0?v(e,t,e.next)>=0&&v(e,e.prev,t)>=0:v(e,t,e.prev)<0||v(e,e.next,t)<0}function O(e,t){var n=new Y(e.i,e.x,e.y),r=new Y(t.i,t.x,t.y),o=e.next,i=t.prev;return e.next=t,t.prev=e,n.next=o,o.prev=n,r.next=n,n.prev=r,i.next=r,r.prev=i,r}function M(e,t,n,r){var o=new Y(e,t,n);return r?(o.next=r.next,o.prev=r,r.next.prev=o,r.next=o):(o.prev=o,o.next=o),o}function N(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Y(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function m(e,t,n,r){for(var o=0,i=t,a=n-r;i<n;i+=r)o+=(e[a]-e[i])*(e[i+1]+e[a+1]),a=i;return o}e.exports=t,e.exports.default=t,t.deviation=function(e,t,n,r){var o=t&&t.length,i=o?t[0]*n:e.length,a=Math.abs(m(e,0,i,n));if(o)for(var s=0,x=t.length;s<x;s++){var u=t[s]*n,h=s<x-1?t[s+1]*n:e.length;a-=Math.abs(m(e,u,h,n))}var p=0;for(s=0;s<r.length;s+=3){var l=r[s]*n,B=r[s+1]*n,c=r[s+2]*n;p+=Math.abs((e[l]-e[c])*(e[B+1]-e[l+1])-(e[l]-e[B])*(e[c+1]-e[l+1]))}return 0===a&&0===p?0:Math.abs((p-a)/a)},t.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,o=0;o<e.length;o++){for(var i=0;i<e[o].length;i++)for(var a=0;a<t;a++)n.vertices.push(e[o][i][a]);o>0&&(r+=e[o-1].length,n.holes.push(r))}return n}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}(()=>{const e=(e,t,n)=>{const r=((e,t,n)=>{const r=[];2==n?(r[0]=new BABYLON.Vector4(.6,0,1,1),r[1]=new BABYLON.Vector4(0,0,.4,1),r[2]=new BABYLON.Vector4(.4,0,.6,1),r[3]=new BABYLON.Vector4(.4,0,.6,1)):(r[0]=new BABYLON.Vector4(.5,0,.75,1),r[1]=new BABYLON.Vector4(0,0,.25,1),r[2]=new BABYLON.Vector4(.25,0,.5,1),r[3]=new BABYLON.Vector4(.75,0,1,1));const o=BABYLON.MeshBuilder.CreateBox(e,{width:n,faceUV:r,wrap:!0},t);o.position.y=.5;const i=new BABYLON.StandardMaterial("boxMaterial");return i.diffuseTexture=new BABYLON.Texture(2===n?"https://assets.babylonjs.com/environments/semihouse.png":"https://assets.babylonjs.com/environments/cubehouse.png",t),o.material=i,o})(e,t,n),o=((e,t)=>{const n=BABYLON.MeshBuilder.CreateCylinder("roof",{diameter:1.3,height:1.2,tessellation:3},e);n.scaling.x=.75,n.scaling.y=t,n.rotation.z=Math.PI/2,n.position.y=1.22;const r=new BABYLON.StandardMaterial("roofMaterial");return r.diffuseTexture=new BABYLON.Texture("https://assets.babylonjs.com/environments/roof.jpg",e),n.material=r,n})(t,n);return BABYLON.Mesh.MergeMeshes([r,o],!0,!1,null,!1,!0)};var t=n(187);function r(e,t){const n=new BABYLON.Animation("wheelAnimation","rotation.y",30,BABYLON.Animation.ANIMATIONTYPE_FLOAT,BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE),r=[];r.push({frame:0,value:0}),r.push({frame:30,value:2*Math.PI}),n.setKeys(r),e.animations=[],e.animations.push(n),t.beginAnimation(e,0,30,!0)}function o(e,t){this.turn=e,this.dist=t}const i=document.getElementById("renderCanvas"),a=new BABYLON.Engine(i,!0,{preserveDrawingBuffer:!0,stencil:!0,disableWebGL2Support:!1}),s=(()=>{const n=new BABYLON.Scene(a),s=new BABYLON.ArcRotateCamera("camera",-Math.PI/2,Math.PI/2.5,15,new BABYLON.Vector3(0,0,0),n);return s.upperBetaLimit=Math.PI/2.2,s.attachControl(i,!0),new BABYLON.HemisphericLight("light",new BABYLON.Vector3(2,1,0),n),function(e){const t=BABYLON.MeshBuilder.CreateBox("skyBox",{size:100},e),n=new BABYLON.StandardMaterial("skyBox",e);n.backFaceCulling=!1,n.reflectionTexture=new BABYLON.CubeTexture(`${Assets.skyboxes.skybox_ny_jpg.rootUrl}skybox`,e),n.reflectionTexture.coordinatesMode=BABYLON.Texture.SKYBOX_MODE,n.diffuseColor=new BABYLON.Color3(0,0,0),n.specularColor=new BABYLON.Color3(0,0,0),t.material=n}(n),(t=>{const n=e("detached",t,1);n.rotation.y=-Math.PI/16,n.position.x=-6.8,n.position.z=2.5;const r=e("semi",t,2);r.rotation.y=-Math.PI/16,r.position.x=-4.5,r.position.z=3;const o=[];o.push([1,-Math.PI/16,-6.8,2.5]),o.push([2,-Math.PI/16,-4.5,3]),o.push([2,-Math.PI/16,-1.5,4]),o.push([2,-Math.PI/3,1.5,6]),o.push([2,15*Math.PI/16,-6.4,-1.5]),o.push([1,15*Math.PI/16,-4.1,-1]),o.push([2,15*Math.PI/16,-2.1,-.5]),o.push([1,5*Math.PI/4,0,-1]),o.push([1,Math.PI+Math.PI/2.5,.5,-3]),o.push([2,Math.PI+Math.PI/2.1,.75,-5]),o.push([1,Math.PI+Math.PI/2.25,.75,-7]),o.push([2,Math.PI/1.9,4.75,-1]),o.push([1,Math.PI/1.95,4.5,-3]),o.push([2,Math.PI/1.9,4.75,-5]),o.push([1,Math.PI/1.9,4.75,-7]),o.push([2,-Math.PI/3,5.25,2]),o.push([1,-Math.PI/3,6,4]);const i=[];for(let e=0;e<o.length;e++){const t=2===o[e][0]?r:n;i[e]=t.createInstance(`house${e}`),i[e].rotation.y=o[e][1],i[e].position.x=o[e][2],i[e].position.z=o[e][3]}})(),function(e){const t=BABYLON.MeshBuilder.CreateGround("villground",{width:24,height:24}),n=new BABYLON.StandardMaterial("groundMat");n.diffuseTexture=new BABYLON.Texture("https://assets.babylonjs.com/environments/villagegreen.png"),n.diffuseTexture.hasAlpha=!0,t.material=n;const r=BABYLON.MeshBuilder.CreateGroundFromHeightMap("valley","https://assets.babylonjs.com/environments/villageheightmap.png",{width:100,height:100,subdivisions:20,minHeight:0,maxHeight:10},e),o=new BABYLON.StandardMaterial("valleyMat");o.diffuseTexture=new BABYLON.Texture("https://assets.babylonjs.com/environments/valleygrass.png"),r.material=o,r.position.y=-.01}(n),function(e){const t=new BABYLON.SpriteManager("treesManager",Assets.sprites.palm_png.path,2e3,{width:512,height:1024},e);for(let e=0;e<500;e++){const e=new BABYLON.Sprite("tree",t);e.position.x=-30*Math.random(),e.position.z=20*Math.random()+8,e.position.y=.5}for(let e=0;e<500;e++){const e=new BABYLON.Sprite("tree",t);e.position.x=25*Math.random()+7,e.position.z=-35*Math.random()+8,e.position.y=.5}}(n),new BABYLON.Sound("nature","./village/nature.wav",n,null,{loop:!0,autoplay:!0}),(e=>{const n=[new BABYLON.Vector3(-.3,0,-.1),new BABYLON.Vector3(.2,0,-.1)];for(let e=0;e<20;e++)n.push(new BABYLON.Vector3(.2*Math.cos(e*Math.PI/40),0,.2*Math.sin(e*Math.PI/40)-.1));n.push(new BABYLON.Vector3(0,0,.1)),n.push(new BABYLON.Vector3(-.3,0,.1));const o=new BABYLON.StandardMaterial("carMaterial");o.diffuseTexture=new BABYLON.Texture("https://assets.babylonjs.com/environments/car.png");const i=[];i[0]=new BABYLON.Vector4(0,.5,.38,1),i[1]=new BABYLON.Vector4(0,0,1,.5),i[2]=new BABYLON.Vector4(.38,1,0,.5);const a=BABYLON.MeshBuilder.ExtrudePolygon("car",{shape:n,depth:.2,faceUV:i,wrap:!0},e,t);a.material=o,function(e,t){const n=[];n[0]=new BABYLON.Vector4(0,0,1,1),n[1]=new BABYLON.Vector4(0,.5,0,.5),n[2]=new BABYLON.Vector4(0,0,1,1);const o=new BABYLON.StandardMaterial("wheelMaterial");o.diffuseTexture=new BABYLON.Texture("https://assets.babylonjs.com/environments/wheel.png");const i=BABYLON.MeshBuilder.CreateCylinder("wheelRB",{diameter:.125,height:.05,faceUV:n});i.material=o,i.parent=e,i.position.z=-.1,i.position.x=-.2,i.position.y=.035;const a=i.clone("wheelRF");a.position.x=.1;const s=i.clone("wheelLB");s.position.y=-.2-.035;const x=a.clone("wheelLF");x.position.y=-.2-.035,r(i,t),r(a,t),r(s,t),r(x,t)}(a,e),a.rotation=new BABYLON.Vector3(-Math.PI/2,0,Math.PI/2),a.position.y=.16,a.position.x=3.25,a.position.z=8,function(e,t){const n=new BABYLON.Animation("carAnimation","position.z",30,BABYLON.Animation.ANIMATIONTYPE_FLOAT,BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE),r=[];r.push({frame:0,value:8}),r.push({frame:150,value:-7}),r.push({frame:180,value:-7}),n.setKeys(r),e.animations=[],e.animations.push(n),t.beginAnimation(e,0,180,!0)}(a,e)})(n),function(e){const t=[];t.push(new o(86,7)),t.push(new o(-85,14.8)),t.push(new o(-93,16.5)),t.push(new o(48,25.5)),t.push(new o(-112,30.5)),t.push(new o(-72,33.2)),t.push(new o(42,37.5)),t.push(new o(-98,45.2)),t.push(new o(0,47)),BABYLON.SceneLoader.ImportMeshAsync("him","./village/walker/Dude/","Dude.babylon",e).then((n=>{let r=n.meshes[0];r.scaling=new BABYLON.Vector3(.015,.015,.015),r.position=new BABYLON.Vector3(-6,0,0),r.rotate(BABYLON.Axis.Y,BABYLON.Tools.ToRadians(-95),BABYLON.Space.Local);const o=r.rotationQuaternion.clone();e.beginAnimation(n.skeletons[0],0,100,!0,1);let i=0,a=0;e.onBeforeRenderObservable.add((()=>{r.movePOV(0,0,.03),i+=.03,i>t[a].dist&&(r.rotate(BABYLON.Axis.Y,BABYLON.Tools.ToRadians(t[a].turn),BABYLON.Space.Local),a+=1,a%=t.length,0===a&&(i=0,r.position=new BABYLON.Vector3(-6,0,0),r.rotationQuaternion=o.clone()))}))}))}(n),n})();a.runRenderLoop((()=>{s.render()})),window.addEventListener("resize",(function(){a.resize()}))})()})();